(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/VSm":function(t,e,i){"use strict";i.d(e,"a",(function(){return b}));var s=i("fXoL"),a=i("JZt4"),r=i("ofXK"),o=i("tyNb"),n=i("nk+c");const c=function(){return["0","add"]};function h(t,e){1&t&&(s.Qb(0,"a",6),s.Ob(1,"button",7),s.Pb()),2&t&&s.gc("routerLink",s.jc(1,c))}function l(t,e){1&t&&(s.Qb(0,"div",8),s.Ob(1,"loading-spinner"),s.Pb())}function g(t,e){1&t&&(s.Qb(0,"div"),s.Qb(1,"div",9),s.ec(2,2),s.Pb(),s.Qb(3,"span"),s.ec(4,3),s.Pb(),s.Pb())}const d=[[["","buttons",""]],[["","search",""]],[["","body",""]],[["","footer",""]]],u=["[buttons]","[search]","[body]","[footer]"];let b=(()=>{class t{constructor(t){this.auth=t,this.entity=void 0}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(s.Nb(a.a))},t.\u0275cmp=s.Hb({type:t,selectors:[["base-layout"]],inputs:{entity:"entity",titletop:"titletop"},ngContentSelectors:u,decls:9,vars:4,consts:[[1,"card"],[1,"page-top","shadow-sm"],[3,"routerLink",4,"ngIf"],[1,"toolbar-search"],["class","text-center",4,"ngIf"],[4,"ngIf"],[3,"routerLink"],["title","novo",1,"btn","btn-success","btn-xs","btn-pdr","fa","fa-plus-circle","float-right","sombra-btn"],[1,"text-center"],[1,"card-body"]],template:function(t,e){1&t&&(s.fc(d),s.Qb(0,"div",0),s.Qb(1,"div",1),s.uc(2),s.ec(3),s.tc(4,h,2,2,"a",2),s.Pb(),s.Qb(5,"div",3),s.ec(6,1),s.Pb(),s.tc(7,l,2,0,"div",4),s.tc(8,g,5,0,"div",5),s.Pb()),2&t&&(s.Bb(2),s.wc(" ",e.titletop," "),s.Bb(2),s.gc("ngIf",e.auth.getPermission("ROLE_ADM_DFIT")||e.auth.getPermission("ROLE_PROF_DFIT")),s.Bb(3),s.gc("ngIf",void 0===e.entity),s.Bb(1),s.gc("ngIf",void 0!==e.entity))},directives:[r.k,o.c,n.a],styles:[".toolbar-search[_ngcontent-%COMP%]{text-shadow:0 -1px 0 hsla(0,0%,98.8%,.904);background:#f5f5f5;box-shadow:0 8px 16px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19)!important;border:2px solid #a9a9a9;border-top-left-radius:10px;border-bottom-left-radius:10px;border-top-right-radius:10px;border-bottom-right-radius:10px}"]}),t})()},J8Zq:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var s=i("fXoL");let a=(()=>{class t{constructor(t,e){this.el=t,this.render=e}writeValue(t){t&&this.render.setValue(this.el.nativeElement,this.aplicarMascara(t))}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}onKeyup(t){let e=t.target.value.replace(/\D/g,"");if(8===t.keyCode)return void(this.onChange=e);let i=this.IkMask.replace(/\D/g,"").replace(/9/g,"_");e.length<=i.length&&(this.onChange=e),t.target.value=this.aplicarMascara(e)}aplicarMascara(t){t=t.replace(/\D/g,"");let e=this.IkMask.replace(/\D/g,"").replace(/9/g,"_"),i=t+e.substring(0,e.length-t.length),s=0;t="";for(let a=0;a<this.IkMask.length;a++)isNaN(parseInt(this.IkMask.charAt(a)))?t+=this.IkMask.charAt(a):t+=i[s++];return t.indexOf("_")>-1&&(t=t.substr(0,t.indexOf("_"))),t}}return t.\u0275fac=function(e){return new(e||t)(s.Nb(s.l),s.Nb(s.D))},t.\u0275dir=s.Ib({type:t,selectors:[["","IkMask",""]],hostBindings:function(t,e){1&t&&s.Yb("keyup",(function(t){return e.onKeyup(t)}))},inputs:{IkMask:"IkMask"}}),t})()},SROd:function(t,e,i){"use strict";i.d(e,"a",(function(){return b}));var s=i("fXoL"),a=i("ofXK");function r(t,e){if(1&t){const t=s.Rb();s.Qb(0,"li",10),s.Qb(1,"a",11),s.Yb("click",(function(e){return s.oc(t),s.bc(2).setPage(0,e)})),s.Ob(2,"span",12),s.Pb(),s.Pb()}}function o(t,e){if(1&t){const t=s.Rb();s.Qb(0,"li",13),s.Qb(1,"a",14),s.Yb("click",(function(e){return s.oc(t),s.bc(2).setPreviousPage(e)})),s.Ob(2,"span",15),s.Pb(),s.Pb()}}const n=function(t){return{active:t}};function c(t,e){if(1&t){const t=s.Rb();s.Qb(0,"li",16),s.Qb(1,"a",11),s.Yb("click",(function(i){s.oc(t);const a=e.$implicit;return s.bc(2).setPage(a-1,i)})),s.uc(2),s.Pb(),s.Pb()}if(2&t){const t=e.$implicit,i=s.bc(2);s.gc("ngClass",s.kc(2,n,t-1===i.page)),s.Bb(2),s.wc(" ",t," ")}}function h(t,e){1&t&&(s.Qb(0,"li",17),s.Qb(1,"a",18),s.uc(2," ... "),s.Pb(),s.Pb())}function l(t,e){if(1&t){const t=s.Rb();s.Qb(0,"li",19),s.Qb(1,"a",11),s.Yb("click",(function(e){s.oc(t);const i=s.bc(2);return i.setPage(i.totalPages-1,e)})),s.uc(2),s.Pb(),s.Pb()}if(2&t){const t=s.bc(2);s.Bb(2),s.wc(" ",t.totalPages," ")}}function g(t,e){if(1&t){const t=s.Rb();s.Qb(0,"li",20),s.Qb(1,"a",14),s.Yb("click",(function(e){return s.oc(t),s.bc(2).setNextPage(e)})),s.Ob(2,"span",21),s.Pb(),s.Pb()}}function d(t,e){if(1&t){const t=s.Rb();s.Qb(0,"li",22),s.Qb(1,"a",11),s.Yb("click",(function(e){s.oc(t);const i=s.bc(2);return i.setPage(i.totalPages-1,e)})),s.Ob(2,"span",23),s.Pb(),s.Pb()}}function u(t,e){if(1&t&&(s.Qb(0,"div",1),s.Qb(1,"ul",2),s.tc(2,r,3,0,"li",3),s.tc(3,o,3,0,"li",4),s.tc(4,c,3,4,"li",5),s.tc(5,h,3,0,"li",6),s.tc(6,l,3,1,"li",7),s.tc(7,g,3,0,"li",8),s.tc(8,d,3,0,"li",9),s.Pb(),s.Qb(9,"p"),s.uc(10,"Total de registros: "),s.Qb(11,"strong"),s.uc(12),s.Pb(),s.uc(13,", p\xe1g. "),s.Qb(14,"strong"),s.uc(15),s.Pb(),s.uc(16," de "),s.Qb(17,"strong"),s.uc(18),s.Pb(),s.uc(19,"."),s.Pb(),s.Pb()),2&t){const t=s.bc();s.Bb(2),s.gc("ngIf",t.page+1!=1),s.Bb(1),s.gc("ngIf",t.page+1!=1),s.Bb(1),s.gc("ngForOf",t.pages),s.Bb(1),s.gc("ngIf",t.lastItem!=t.totalPages&&t.lastItem+1!=t.totalPages),s.Bb(1),s.gc("ngIf",t.lastItem!=t.totalPages),s.Bb(1),s.gc("ngIf",t.page+1!=t.lastItem),s.Bb(1),s.gc("ngIf",t.page+1!=t.lastItem),s.Bb(4),s.vc(t.totalElements),s.Bb(3),s.vc(t.page+1),s.Bb(3),s.vc(t.totalPages)}}let b=(()=>{class t{constructor(){this.pageData=new s.n,this.adjacente=2}ngOnInit(){this.page=this.page||0,this.count=this.count||10,this.geralinks()}setNextPage(t){t.preventDefault(),this.page+1<this.pages.length&&(this.page=this.page+1,this.paginar(this.page,this.count))}setPreviousPage(t){t.preventDefault(),this.page>0&&(this.page=this.page-1,this.paginar(this.page,this.count))}setPage(t,e){e.preventDefault(),this.page=t,this.paginar(this.page,this.count)}paginar(t,e){this.pageData.emit({page:t,count:e}),this.geralinks()}geralinks(){this.pages=[];const t=this.page+1+this.adjacente>=this.totalPages?this.totalPages:this.page+1+this.adjacente;for(let e=this.page+1-this.adjacente<=0||this.page-this.adjacente<=0?1:this.page+1-this.adjacente;e<=t;e++)this.pages.push(e);this.lastItem=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Hb({type:t,selectors:[["ikPagination"]],inputs:{count:"count",page:"page",totalPages:"totalPages",totalElements:"totalElements"},outputs:{pageData:"pageData"},decls:1,vars:1,consts:[["class","box-footer clearfix",4,"ngIf"],[1,"box-footer","clearfix"],[1,"pagination","justify-content-center"],["class","page-item","title","primeiro",4,"ngIf"],["class","page-item d-none d-sm-block","title","anterior",4,"ngIf"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"],["class","page-item disabled",4,"ngIf"],["class","page-item",4,"ngIf"],["class","page-item d-none d-sm-block","title","pr\xf3ximo",4,"ngIf"],["class","page-item","title","\xfaltimo",4,"ngIf"],["title","primeiro",1,"page-item"],["href","#",1,"page-link",3,"click"],["aria-hidden","true",1,"fa","fa-fast-backward"],["title","anterior",1,"page-item","d-none","d-sm-block"],["href","",1,"page-link",3,"click"],["aria-hidden","true",1,"fa","fa-backward"],[1,"page-item",3,"ngClass"],[1,"page-item","disabled"],["href","#",1,"page-link"],[1,"page-item"],["title","pr\xf3ximo",1,"page-item","d-none","d-sm-block"],["aria-hidden","true",1,"fa","fa-forward"],["title","\xfaltimo",1,"page-item"],["aria-hidden","true",1,"fa","fa-fast-forward"]],template:function(t,e){1&t&&s.tc(0,u,20,10,"div",0),2&t&&s.gc("ngIf",null!=e.pages)},directives:[a.k,a.j,a.i],styles:[".page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#07889b!important;border-color:#07889b!important;border-radius:5px}.page-link[_ngcontent-%COMP%]{color:#07889b}"]}),t})()},fO6d:function(t,e,i){"use strict";var s=i("tjtH");i.d(e,"a",(function(){return s.a}));var a=i("nWdV");i.d(e,"b",(function(){return a.a}))},nWdV:function(t,e,i){"use strict";i.d(e,"a",(function(){return d}));var s=i("mrSG"),a=i("IzEk"),r=i("gb6z"),o=i("e5me"),n=i("JZt4"),c=i("T8WP"),h=i("SvUs"),l=i("72KF"),g=i("fXoL");let d=(()=>{class t{constructor(t,e){this.injector=t,this.service=e,this.filter=new l.a,this.page=0,this.count=5,this.counts=[2,5,10,20,50,100],this.search="",this.auth=this.injector.get(n.a),this.confirm=this.injector.get(r.a),this.erroService=this.injector.get(o.c),this.load=this.injector.get(c.a),this.toast=this.injector.get(h.a)}ngOnInit(){this.getList(),this.listFactory()}getList(){this.service.findAllPage(this.page,this.count,this.filter).pipe(Object(a.a)(1)).subscribe(t=>{this.list=t.data.content,this.transformObjects().then(t=>{this.list=t}),this.totalPages=new Array(t.data.totalPages).length,this.totalElements=t.data.totalElements},t=>{this.toast.danger(`Falha ao listar!! (${this.handleError(t)})`)})}openModalDelete(t,e){this.id=t,this.confirm.show({message:`Deseja deletar ${e}`,siFn:()=>{this.deletar()}})}deletar(){this.load.show({}),this.service.delete(this.id).subscribe(t=>{this.toast.success("Exclus\xe3o realizada com sucesso!"),this.getList(),this.load.dismiss()},t=>{this.toast.danger(`Falha ao deletar!! (${this.handleError(t)})`),this.load.dismiss()})}listFactory(){}pagination(t){this.page=t.page,this.count=t.count,this.getList()}transformObjects(){return Object(s.__awaiter)(this,void 0,void 0,(function*(){return this.list}))}relatorio(t){this.relatorioService[t]().then(t=>{const e=window.URL.createObjectURL(t);window.open(e)})}filtrar(t){(t.length>2||t.length<1)&&setTimeout(()=>{this.getList(),this.pagination({page:0,count:this.count})},100)}handleError(t){return this.erroService.handler(t)}}return t.\u0275fac=function(t){g.Xb()},t.\u0275dir=g.Ib({type:t}),t})()},tjtH:function(t,e,i){"use strict";i.d(e,"a",(function(){return m}));var s=i("mrSG"),a=i("tyNb"),r=i("fXoL"),o=i("3Pt+"),n=i("IzEk"),c=i("lJxs"),h=i("eIep"),l=i("EY2u"),g=i("72KF"),d=i("e5me"),u=i("JZt4"),b=i("T8WP"),p=i("SvUs"),f=i("d6RJ");let m=(()=>{class t{constructor(t,e,i,s){this.injector=t,this.service=e,this.urlImg=i,this.urlList=s,this.filter=new g.a,this.validateMsg="Erro de Valida\xe7\xe3o",this.uploadProgress=0,this.auth=this.injector.get(u.a),this.cd=this.injector.get(r.h),this.cepService=this.injector.get(d.b),this.confirm=this.injector.get(f.a),this.erroService=this.injector.get(d.c),this.formBuilder=this.injector.get(o.c),this.imageService=this.injector.get(d.d),this.load=this.injector.get(b.a),this.route=this.injector.get(a.a),this.router=this.injector.get(a.b),this.toast=this.injector.get(p.a)}ngOnInit(){this.route.params.pipe(Object(n.a)(1)).subscribe(t=>{"0"===t.id?this.newRecord():(this.id=t.id,this.findById(this.id))}),this.listFactory()}findById(t){this.service.findById(t).pipe(Object(n.a)(1)).subscribe(t=>{this.object=t.data,this.guardListAttrib(),this.object.hasOwnProperty("endereco")&&this.cepService.getCidadeNome(this.object.endereco.cidade).subscribe(t=>this.cidades=t),this.formConstructorById().then(t=>{this.formulario=t,this.chageCitys()})},t=>{this.toast.danger(`Falha ao localizar documento!!: (${this.handleError(t)})`)})}newRecord(){this.formConstructorNew().then(t=>{this.formulario=t,this.chageCitys()})}onSubmit(){this.object=this.formulario.value,this.returnListAttrib(),this.load.show({message:"Aguarde valida\xe7\xe3o..."}),this.validateData().then(t=>{if(this.load.dismiss(),t)if(this.object.id)if(this.filePhoto){this.load.show({message:"Aguarde upload..."});const t=this.imageService.uploadImg(this.urlImg,this.filePhoto,this.object.id);t.percentageChanges().subscribe(t=>{this.uploadProgress=Math.round(t),this.cd.detectChanges()}),t.then(t=>{t.ref.getDownloadURL().then(t=>{this.object.urlImg=t,this.edit(this.object)})})}else this.load.show({}),this.edit(this.object);else this.service.createOrUpdate(this.object).subscribe(t=>{this.toast.success("Registro efetuado com sucesso!"),this.resetForm()},t=>{console.log(t),this.toast.danger(`Erro ao registrar ${this.handleError(t)}`)});else this.toast.danger(this.validateMsg)})}edit(t){this.service.createOrUpdate(t).pipe(Object(n.a)(1)).subscribe(t=>{this.load.dismiss(),this.toast.success("Edi\xe7\xe3o realizada com sucesso!"),this.filePhoto=void 0,this.uploadProgress=0,this.cd.detectChanges()},t=>{this.toast.danger(`Erro ao editar: (${this.handleError(t)})`)})}onPhoto(t){const e=this.load;e.show({}),this.imageService.processImage(t.target.files).pipe(Object(n.a)(1)).subscribe(t=>{this.filePhoto=t.data},t=>{},()=>{e.dismiss()})}guardListAttrib(){return Object(s.__awaiter)(this,void 0,void 0,(function*(){}))}returnListAttrib(){return Object(s.__awaiter)(this,void 0,void 0,(function*(){}))}validateData(){return Object(s.__awaiter)(this,void 0,void 0,(function*(){return!0}))}formConstructorById(){return Object(s.__awaiter)(this,void 0,void 0,(function*(){return this.formBuilder.group({})}))}formConstructorNew(){return Object(s.__awaiter)(this,void 0,void 0,(function*(){return this.formBuilder.group({})}))}resetForm(){this.formulario.reset()}chageCitys(){void 0!==this.object&&this.object.hasOwnProperty("endereco")&&this.formulario.get("endereco.estado").valueChanges.pipe(Object(c.a)(t=>this.estados.filter(e=>e.sigla===t)),Object(c.a)(t=>t&&t.length>0?t[0].id:Object(l.b)()),Object(h.a)(t=>this.cepService.getCidades(t))).subscribe(t=>this.cidades=t)}consultaCEP(){const t=this.formulario.get("endereco.cep").value;null!=t&&""!==t&&this.cepService.consultaCEP(t).pipe(Object(n.a)(1)).subscribe(t=>{this.populaDadosForm(t)},t=>console.log(this.handleError(t)))}populaDadosForm(t){this.formulario.patchValue({endereco:{cep:t.cep,logradouro:t.logradouro,complemento:t.complemento,bairro:t.bairro,cidade:t.localidade,estado:t.uf}})}getCidades(){this.cepService.getCidades(6).subscribe(t=>{this.cidades=t})}listFactory(){}handleError(t){return this.erroService.handler(t)}return(){this.router.navigate([this.urlList])}}return t.\u0275fac=function(t){r.Xb()},t.\u0275dir=r.Ib({type:t}),t})()}}]);