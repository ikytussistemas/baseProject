function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/VSm":function(t,e,i){"use strict";i.d(e,"a",(function(){return d}));var n=i("fXoL"),a=i("JZt4"),r=i("ofXK"),o=i("tyNb"),s=i("nk+c"),c=function(){return["0","add"]};function u(t,e){1&t&&(n.Qb(0,"a",6),n.Ob(1,"button",7),n.Pb()),2&t&&n.gc("routerLink",n.jc(1,c))}function l(t,e){1&t&&(n.Qb(0,"div",8),n.Ob(1,"loading-spinner"),n.Pb())}function f(t,e){1&t&&(n.Qb(0,"div"),n.Qb(1,"div",9),n.ec(2,2),n.Pb(),n.Qb(3,"span"),n.ec(4,3),n.Pb(),n.Pb())}var h=[[["","buttons",""]],[["","search",""]],[["","body",""]],[["","footer",""]]],g=["[buttons]","[search]","[body]","[footer]"],d=function(){var t=function(){function t(e){_classCallCheck(this,t),this.auth=e,this.entity=void 0}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}();return t.\u0275fac=function(e){return new(e||t)(n.Nb(a.a))},t.\u0275cmp=n.Hb({type:t,selectors:[["base-layout"]],inputs:{entity:"entity",titletop:"titletop"},ngContentSelectors:g,decls:9,vars:4,consts:[[1,"card"],[1,"page-top","shadow-sm"],[3,"routerLink",4,"ngIf"],[1,"toolbar-search"],["class","text-center",4,"ngIf"],[4,"ngIf"],[3,"routerLink"],["title","novo",1,"btn","btn-success","btn-xs","btn-pdr","fa","fa-plus-circle","float-right","sombra-btn"],[1,"text-center"],[1,"card-body"]],template:function(t,e){1&t&&(n.fc(h),n.Qb(0,"div",0),n.Qb(1,"div",1),n.uc(2),n.ec(3),n.tc(4,u,2,2,"a",2),n.Pb(),n.Qb(5,"div",3),n.ec(6,1),n.Pb(),n.tc(7,l,2,0,"div",4),n.tc(8,f,5,0,"div",5),n.Pb()),2&t&&(n.Bb(2),n.wc(" ",e.titletop," "),n.Bb(2),n.gc("ngIf",e.auth.getPermission("ROLE_ADM_DFIT")||e.auth.getPermission("ROLE_PROF_DFIT")),n.Bb(3),n.gc("ngIf",void 0===e.entity),n.Bb(1),n.gc("ngIf",void 0!==e.entity))},directives:[r.k,o.c,s.a],styles:[".toolbar-search[_ngcontent-%COMP%]{text-shadow:0 -1px 0 hsla(0,0%,98.8%,.904);background:#f5f5f5;box-shadow:0 8px 16px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19)!important;border:2px solid #a9a9a9;border-top-left-radius:10px;border-bottom-left-radius:10px;border-top-right-radius:10px;border-bottom-right-radius:10px}"]}),t}()},J8Zq:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i("fXoL"),a=function(){var t=function(){function t(e,i){_classCallCheck(this,t),this.el=e,this.render=i}return _createClass(t,[{key:"writeValue",value:function(t){t&&this.render.setValue(this.el.nativeElement,this.aplicarMascara(t))}},{key:"registerOnChange",value:function(t){this.onChange=t}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"onKeyup",value:function(t){var e=t.target.value.replace(/\D/g,"");if(8!==t.keyCode){var i=this.IkMask.replace(/\D/g,"").replace(/9/g,"_");e.length<=i.length&&(this.onChange=e),t.target.value=this.aplicarMascara(e)}else this.onChange=e}},{key:"aplicarMascara",value:function(t){t=t.replace(/\D/g,"");var e=this.IkMask.replace(/\D/g,"").replace(/9/g,"_"),i=t+e.substring(0,e.length-t.length),n=0;t="";for(var a=0;a<this.IkMask.length;a++)isNaN(parseInt(this.IkMask.charAt(a)))?t+=this.IkMask.charAt(a):t+=i[n++];return t.indexOf("_")>-1&&(t=t.substr(0,t.indexOf("_"))),t}}]),t}();return t.\u0275fac=function(e){return new(e||t)(n.Nb(n.l),n.Nb(n.D))},t.\u0275dir=n.Ib({type:t,selectors:[["","IkMask",""]],hostBindings:function(t,e){1&t&&n.Yb("keyup",(function(t){return e.onKeyup(t)}))},inputs:{IkMask:"IkMask"}}),t}()},SROd:function(t,e,i){"use strict";i.d(e,"a",(function(){return d}));var n=i("fXoL"),a=i("ofXK");function r(t,e){if(1&t){var i=n.Rb();n.Qb(0,"li",10),n.Qb(1,"a",11),n.Yb("click",(function(t){return n.oc(i),n.bc(2).setPage(0,t)})),n.Ob(2,"span",12),n.Pb(),n.Pb()}}function o(t,e){if(1&t){var i=n.Rb();n.Qb(0,"li",13),n.Qb(1,"a",14),n.Yb("click",(function(t){return n.oc(i),n.bc(2).setPreviousPage(t)})),n.Ob(2,"span",15),n.Pb(),n.Pb()}}var s=function(t){return{active:t}};function c(t,e){if(1&t){var i=n.Rb();n.Qb(0,"li",16),n.Qb(1,"a",11),n.Yb("click",(function(t){n.oc(i);var a=e.$implicit;return n.bc(2).setPage(a-1,t)})),n.uc(2),n.Pb(),n.Pb()}if(2&t){var a=e.$implicit,r=n.bc(2);n.gc("ngClass",n.kc(2,s,a-1===r.page)),n.Bb(2),n.wc(" ",a," ")}}function u(t,e){1&t&&(n.Qb(0,"li",17),n.Qb(1,"a",18),n.uc(2," ... "),n.Pb(),n.Pb())}function l(t,e){if(1&t){var i=n.Rb();n.Qb(0,"li",19),n.Qb(1,"a",11),n.Yb("click",(function(t){n.oc(i);var e=n.bc(2);return e.setPage(e.totalPages-1,t)})),n.uc(2),n.Pb(),n.Pb()}if(2&t){var a=n.bc(2);n.Bb(2),n.wc(" ",a.totalPages," ")}}function f(t,e){if(1&t){var i=n.Rb();n.Qb(0,"li",20),n.Qb(1,"a",14),n.Yb("click",(function(t){return n.oc(i),n.bc(2).setNextPage(t)})),n.Ob(2,"span",21),n.Pb(),n.Pb()}}function h(t,e){if(1&t){var i=n.Rb();n.Qb(0,"li",22),n.Qb(1,"a",11),n.Yb("click",(function(t){n.oc(i);var e=n.bc(2);return e.setPage(e.totalPages-1,t)})),n.Ob(2,"span",23),n.Pb(),n.Pb()}}function g(t,e){if(1&t&&(n.Qb(0,"div",1),n.Qb(1,"ul",2),n.tc(2,r,3,0,"li",3),n.tc(3,o,3,0,"li",4),n.tc(4,c,3,4,"li",5),n.tc(5,u,3,0,"li",6),n.tc(6,l,3,1,"li",7),n.tc(7,f,3,0,"li",8),n.tc(8,h,3,0,"li",9),n.Pb(),n.Qb(9,"p"),n.uc(10,"Total de registros: "),n.Qb(11,"strong"),n.uc(12),n.Pb(),n.uc(13,", p\xe1g. "),n.Qb(14,"strong"),n.uc(15),n.Pb(),n.uc(16," de "),n.Qb(17,"strong"),n.uc(18),n.Pb(),n.uc(19,"."),n.Pb(),n.Pb()),2&t){var i=n.bc();n.Bb(2),n.gc("ngIf",i.page+1!=1),n.Bb(1),n.gc("ngIf",i.page+1!=1),n.Bb(1),n.gc("ngForOf",i.pages),n.Bb(1),n.gc("ngIf",i.lastItem!=i.totalPages&&i.lastItem+1!=i.totalPages),n.Bb(1),n.gc("ngIf",i.lastItem!=i.totalPages),n.Bb(1),n.gc("ngIf",i.page+1!=i.lastItem),n.Bb(1),n.gc("ngIf",i.page+1!=i.lastItem),n.Bb(4),n.vc(i.totalElements),n.Bb(3),n.vc(i.page+1),n.Bb(3),n.vc(i.totalPages)}}var d=function(){var t=function(){function t(){_classCallCheck(this,t),this.pageData=new n.n,this.adjacente=2}return _createClass(t,[{key:"ngOnInit",value:function(){this.page=this.page||0,this.count=this.count||10,this.geralinks()}},{key:"setNextPage",value:function(t){t.preventDefault(),this.page+1<this.pages.length&&(this.page=this.page+1,this.paginar(this.page,this.count))}},{key:"setPreviousPage",value:function(t){t.preventDefault(),this.page>0&&(this.page=this.page-1,this.paginar(this.page,this.count))}},{key:"setPage",value:function(t,e){e.preventDefault(),this.page=t,this.paginar(this.page,this.count)}},{key:"paginar",value:function(t,e){this.pageData.emit({page:t,count:e}),this.geralinks()}},{key:"geralinks",value:function(){this.pages=[];for(var t=this.page+1+this.adjacente>=this.totalPages?this.totalPages:this.page+1+this.adjacente,e=this.page+1-this.adjacente<=0||this.page-this.adjacente<=0?1:this.page+1-this.adjacente;e<=t;e++)this.pages.push(e);this.lastItem=t}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Hb({type:t,selectors:[["ikPagination"]],inputs:{count:"count",page:"page",totalPages:"totalPages",totalElements:"totalElements"},outputs:{pageData:"pageData"},decls:1,vars:1,consts:[["class","box-footer clearfix",4,"ngIf"],[1,"box-footer","clearfix"],[1,"pagination","justify-content-center"],["class","page-item","title","primeiro",4,"ngIf"],["class","page-item d-none d-sm-block","title","anterior",4,"ngIf"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"],["class","page-item disabled",4,"ngIf"],["class","page-item",4,"ngIf"],["class","page-item d-none d-sm-block","title","pr\xf3ximo",4,"ngIf"],["class","page-item","title","\xfaltimo",4,"ngIf"],["title","primeiro",1,"page-item"],["href","#",1,"page-link",3,"click"],["aria-hidden","true",1,"fa","fa-fast-backward"],["title","anterior",1,"page-item","d-none","d-sm-block"],["href","",1,"page-link",3,"click"],["aria-hidden","true",1,"fa","fa-backward"],[1,"page-item",3,"ngClass"],[1,"page-item","disabled"],["href","#",1,"page-link"],[1,"page-item"],["title","pr\xf3ximo",1,"page-item","d-none","d-sm-block"],["aria-hidden","true",1,"fa","fa-forward"],["title","\xfaltimo",1,"page-item"],["aria-hidden","true",1,"fa","fa-fast-forward"]],template:function(t,e){1&t&&n.tc(0,g,20,10,"div",0),2&t&&n.gc("ngIf",null!=e.pages)},directives:[a.k,a.j,a.i],styles:[".page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#07889b!important;border-color:#07889b!important;border-radius:5px}.page-link[_ngcontent-%COMP%]{color:#07889b}"]}),t}()},fO6d:function(t,e,i){"use strict";var n=i("tjtH");i.d(e,"a",(function(){return n.a}));var a=i("nWdV");i.d(e,"b",(function(){return a.a}))},nWdV:function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i("mrSG"),a=i("IzEk"),r=i("gb6z"),o=i("e5me"),s=i("JZt4"),c=i("T8WP"),u=i("SvUs"),l=i("72KF"),f=i("fXoL"),h=function(){var t=function(){function t(e,i){_classCallCheck(this,t),this.injector=e,this.service=i,this.filter=new l.a,this.page=0,this.count=5,this.counts=[2,5,10,20,50,100],this.search="",this.auth=this.injector.get(s.a),this.confirm=this.injector.get(r.a),this.erroService=this.injector.get(o.c),this.load=this.injector.get(c.a),this.toast=this.injector.get(u.a)}return _createClass(t,[{key:"ngOnInit",value:function(){this.getList(),this.listFactory()}},{key:"getList",value:function(){var t=this;this.service.findAllPage(this.page,this.count,this.filter).pipe(Object(a.a)(1)).subscribe((function(e){t.list=e.data.content,t.transformObjects().then((function(e){t.list=e})),t.totalPages=new Array(e.data.totalPages).length,t.totalElements=e.data.totalElements}),(function(e){t.toast.danger("Falha ao listar!! (".concat(t.handleError(e),")"))}))}},{key:"openModalDelete",value:function(t,e){var i=this;this.id=t,this.confirm.show({message:"Deseja deletar ".concat(e),siFn:function(){i.deletar()}})}},{key:"deletar",value:function(){var t=this;this.load.show({}),this.service.delete(this.id).subscribe((function(e){t.toast.success("Exclus\xe3o realizada com sucesso!"),t.getList(),t.load.dismiss()}),(function(e){t.toast.danger("Falha ao deletar!! (".concat(t.handleError(e),")")),t.load.dismiss()}))}},{key:"listFactory",value:function(){}},{key:"pagination",value:function(t){this.page=t.page,this.count=t.count,this.getList()}},{key:"transformObjects",value:function(){return Object(n.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.list);case 1:case"end":return t.stop()}}),t,this)})))}},{key:"relatorio",value:function(t){this.relatorioService[t]().then((function(t){var e=window.URL.createObjectURL(t);window.open(e)}))}},{key:"filtrar",value:function(t){var e=this;(t.length>2||t.length<1)&&setTimeout((function(){e.getList(),e.pagination({page:0,count:e.count})}),100)}},{key:"handleError",value:function(t){return this.erroService.handler(t)}}]),t}();return t.\u0275fac=function(t){f.Xb()},t.\u0275dir=f.Ib({type:t}),t}()},tjtH:function(t,e,i){"use strict";i.d(e,"a",(function(){return v}));var n=i("mrSG"),a=i("tyNb"),r=i("fXoL"),o=i("3Pt+"),s=i("IzEk"),c=i("lJxs"),u=i("eIep"),l=i("EY2u"),f=i("72KF"),h=i("e5me"),g=i("JZt4"),d=i("T8WP"),b=i("SvUs"),p=i("d6RJ"),v=function(){var t=function(){function t(e,i,n,s){_classCallCheck(this,t),this.injector=e,this.service=i,this.urlImg=n,this.urlList=s,this.filter=new f.a,this.validateMsg="Erro de Valida\xe7\xe3o",this.uploadProgress=0,this.auth=this.injector.get(g.a),this.cd=this.injector.get(r.h),this.cepService=this.injector.get(h.b),this.confirm=this.injector.get(p.a),this.erroService=this.injector.get(h.c),this.formBuilder=this.injector.get(o.c),this.imageService=this.injector.get(h.d),this.load=this.injector.get(d.a),this.route=this.injector.get(a.a),this.router=this.injector.get(a.b),this.toast=this.injector.get(b.a)}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.route.params.pipe(Object(s.a)(1)).subscribe((function(e){"0"===e.id?t.newRecord():(t.id=e.id,t.findById(t.id))})),this.listFactory()}},{key:"findById",value:function(t){var e=this;this.service.findById(t).pipe(Object(s.a)(1)).subscribe((function(t){e.object=t.data,e.guardListAttrib(),e.object.hasOwnProperty("endereco")&&e.cepService.getCidadeNome(e.object.endereco.cidade).subscribe((function(t){return e.cidades=t})),e.formConstructorById().then((function(t){e.formulario=t,e.chageCitys()}))}),(function(t){e.toast.danger("Falha ao localizar documento!!: (".concat(e.handleError(t),")"))}))}},{key:"newRecord",value:function(){var t=this;this.formConstructorNew().then((function(e){t.formulario=e,t.chageCitys()}))}},{key:"onSubmit",value:function(){var t=this;this.object=this.formulario.value,this.returnListAttrib(),this.load.show({message:"Aguarde valida\xe7\xe3o..."}),this.validateData().then((function(e){if(t.load.dismiss(),e)if(t.object.id)if(t.filePhoto){t.load.show({message:"Aguarde upload..."});var i=t.imageService.uploadImg(t.urlImg,t.filePhoto,t.object.id);i.percentageChanges().subscribe((function(e){t.uploadProgress=Math.round(e),t.cd.detectChanges()})),i.then((function(e){e.ref.getDownloadURL().then((function(e){t.object.urlImg=e,t.edit(t.object)}))}))}else t.load.show({}),t.edit(t.object);else t.service.createOrUpdate(t.object).subscribe((function(e){t.toast.success("Registro efetuado com sucesso!"),t.resetForm()}),(function(e){console.log(e),t.toast.danger("Erro ao registrar ".concat(t.handleError(e)))}));else t.toast.danger(t.validateMsg)}))}},{key:"edit",value:function(t){var e=this;this.service.createOrUpdate(t).pipe(Object(s.a)(1)).subscribe((function(t){e.load.dismiss(),e.toast.success("Edi\xe7\xe3o realizada com sucesso!"),e.filePhoto=void 0,e.uploadProgress=0,e.cd.detectChanges()}),(function(t){e.toast.danger("Erro ao editar: (".concat(e.handleError(t),")"))}))}},{key:"onPhoto",value:function(t){var e=this,i=this.load;i.show({}),this.imageService.processImage(t.target.files).pipe(Object(s.a)(1)).subscribe((function(t){e.filePhoto=t.data}),(function(t){}),(function(){i.dismiss()}))}},{key:"guardListAttrib",value:function(){return Object(n.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))}},{key:"returnListAttrib",value:function(){return Object(n.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))}},{key:"validateData",value:function(){return Object(n.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",!0);case 1:case"end":return t.stop()}}),t)})))}},{key:"formConstructorById",value:function(){return Object(n.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.formBuilder.group({}));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"formConstructorNew",value:function(){return Object(n.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.formBuilder.group({}));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"resetForm",value:function(){this.formulario.reset()}},{key:"chageCitys",value:function(){var t=this;void 0!==this.object&&this.object.hasOwnProperty("endereco")&&this.formulario.get("endereco.estado").valueChanges.pipe(Object(c.a)((function(e){return t.estados.filter((function(t){return t.sigla===e}))})),Object(c.a)((function(t){return t&&t.length>0?t[0].id:Object(l.b)()})),Object(u.a)((function(e){return t.cepService.getCidades(e)}))).subscribe((function(e){return t.cidades=e}))}},{key:"consultaCEP",value:function(){var t=this,e=this.formulario.get("endereco.cep").value;null!=e&&""!==e&&this.cepService.consultaCEP(e).pipe(Object(s.a)(1)).subscribe((function(e){t.populaDadosForm(e)}),(function(e){return console.log(t.handleError(e))}))}},{key:"populaDadosForm",value:function(t){this.formulario.patchValue({endereco:{cep:t.cep,logradouro:t.logradouro,complemento:t.complemento,bairro:t.bairro,cidade:t.localidade,estado:t.uf}})}},{key:"getCidades",value:function(){var t=this;this.cepService.getCidades(6).subscribe((function(e){t.cidades=e}))}},{key:"listFactory",value:function(){}},{key:"handleError",value:function(t){return this.erroService.handler(t)}},{key:"return",value:function(){this.router.navigate([this.urlList])}}]),t}();return t.\u0275fac=function(t){r.Xb()},t.\u0275dir=r.Ib({type:t}),t}()}}]);