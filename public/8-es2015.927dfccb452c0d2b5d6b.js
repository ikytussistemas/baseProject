(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"/VSm":function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var o=i("fXoL"),s=i("JZt4"),r=i("ofXK"),n=i("tyNb"),a=i("nk+c");const c=function(){return["0","add"]};function b(t,e){1&t&&(o.Qb(0,"a",6),o.Ob(1,"button",7),o.Pb()),2&t&&o.gc("routerLink",o.jc(1,c))}function l(t,e){1&t&&(o.Qb(0,"div",8),o.Ob(1,"loading-spinner"),o.Pb())}function d(t,e){1&t&&(o.Qb(0,"div"),o.Qb(1,"div",9),o.ec(2,2),o.Pb(),o.Qb(3,"span"),o.ec(4,3),o.Pb(),o.Pb())}const u=[[["","buttons",""]],[["","search",""]],[["","body",""]],[["","footer",""]]],g=["[buttons]","[search]","[body]","[footer]"];let h=(()=>{class t{constructor(t){this.auth=t,this.entity=void 0}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(o.Nb(s.a))},t.\u0275cmp=o.Hb({type:t,selectors:[["base-layout"]],inputs:{entity:"entity",titletop:"titletop"},ngContentSelectors:g,decls:9,vars:4,consts:[[1,"card"],[1,"page-top","shadow-sm"],[3,"routerLink",4,"ngIf"],[1,"toolbar-search"],["class","text-center",4,"ngIf"],[4,"ngIf"],[3,"routerLink"],["title","novo",1,"btn","btn-success","btn-xs","btn-pdr","fa","fa-plus-circle","float-right","sombra-btn"],[1,"text-center"],[1,"card-body"]],template:function(t,e){1&t&&(o.fc(u),o.Qb(0,"div",0),o.Qb(1,"div",1),o.uc(2),o.ec(3),o.tc(4,b,2,2,"a",2),o.Pb(),o.Qb(5,"div",3),o.ec(6,1),o.Pb(),o.tc(7,l,2,0,"div",4),o.tc(8,d,5,0,"div",5),o.Pb()),2&t&&(o.Bb(2),o.wc(" ",e.titletop," "),o.Bb(2),o.gc("ngIf",e.auth.getPermission("ROLE_ADM_DFIT")||e.auth.getPermission("ROLE_PROF_DFIT")),o.Bb(3),o.gc("ngIf",void 0===e.entity),o.Bb(1),o.gc("ngIf",void 0!==e.entity))},directives:[r.k,n.c,a.a],styles:[".toolbar-search[_ngcontent-%COMP%]{text-shadow:0 -1px 0 hsla(0,0%,98.8%,.904);background:#f5f5f5;box-shadow:0 8px 16px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19)!important;border:2px solid #a9a9a9;border-top-left-radius:10px;border-bottom-left-radius:10px;border-top-right-radius:10px;border-bottom-right-radius:10px}"]}),t})()},"9uT7":function(t,e,i){"use strict";i.r(e),i.d(e,"ExerciciosModule",(function(){return D}));var o=i("tyNb"),s=i("mrSG"),r=i("3Pt+"),n=i("fO6d"),a=i("X/eq"),c=i("fXoL"),b=i("o0su"),l=i("ofXK"),d=i("WIpw"),u=i("JCrf"),g=i("uSqO");function h(t,e){if(1&t&&(c.Qb(0,"div",10),c.Ob(1,"img",11),c.Pb()),2&t){const t=c.bc();c.Bb(1),c.gc("src",t.object.urlImg||"./../../../../../assets/img/prod.jpg",c.pc)}}function f(t,e){if(1&t&&(c.Qb(0,"option",36),c.uc(1),c.Pb()),2&t){const t=e.$implicit;c.gc("value",t.value),c.Bb(1),c.vc(t.desc)}}function p(t,e){if(1&t&&c.Ob(0,"progress-bar",37),2&t){const t=c.bc(2);c.gc("progress",t.uploadProgress)}}function m(t,e){if(1&t){const t=c.Rb();c.Qb(0,"input",38),c.Yb("change",(function(e){return c.oc(t),c.bc(2).onPhoto(e)})),c.Pb()}}function v(t,e){if(1&t&&(c.Qb(0,"div",30),c.Qb(1,"button",39),c.Ob(2,"span",40),c.Ob(3,"i",41),c.Pb(),c.Pb()),2&t){const t=c.bc(2);c.Bb(1),c.gc("disabled",!t.formulario.valid)}}function P(t,e){if(1&t){const t=c.Rb();c.Qb(0,"form",12),c.Yb("ngSubmit",(function(e){return c.oc(t),c.bc().onSubmit(),e.preventDefault()})),c.Qb(1,"div",13),c.Qb(2,"div",14),c.Qb(3,"div",15),c.Qb(4,"div",16),c.Qb(5,"label",17),c.uc(6,"Nome"),c.Pb(),c.Ob(7,"input",18),c.Ob(8,"valid-msg",19),c.Pb(),c.Pb(),c.Qb(9,"div",20),c.Qb(10,"div",16),c.Qb(11,"label",21),c.uc(12,"Alvo"),c.Pb(),c.Qb(13,"select",22),c.tc(14,f,2,2,"option",23),c.Pb(),c.Pb(),c.Pb(),c.Qb(15,"div",24),c.Qb(16,"div",16),c.Qb(17,"label",25),c.uc(18,"Descri\xe7\xe3o"),c.Pb(),c.Ob(19,"textarea",26),c.Ob(20,"valid-msg",19),c.Pb(),c.Pb(),c.Pb(),c.tc(21,p,1,1,"progress-bar",27),c.Ob(22,"hr",28),c.Qb(23,"div",29),c.Qb(24,"div",30),c.Qb(25,"button",31),c.tc(26,m,1,0,"input",32),c.Ob(27,"i",33),c.Pb(),c.Pb(),c.Ob(28,"div",34),c.tc(29,v,4,1,"div",35),c.Pb(),c.Pb(),c.Pb()}if(2&t){const t=c.bc();c.gc("formGroup",t.formulario),c.Bb(8),c.gc("control",t.formulario.controls.name),c.Bb(6),c.gc("ngForOf",t.alvos),c.Bb(6),c.gc("control",t.formulario.controls.description),c.Bb(1),c.gc("ngIf",t.uploadProgress),c.Bb(5),c.gc("ngIf",void 0!==t.object),c.Bb(3),c.gc("ngIf",t.auth.getPermission("ROLE_DIR")||t.auth.getPermission("ROLE_COORDPEDAG"))}}let Q=(()=>{class t extends n.a{constructor(t,e){super(t,e,"exercicios","/dfit/exercicios"),this.injector=t,this.exerciciosService=e,this.alvos=a.c.Targets}formConstructorById(){return Object(s.__awaiter)(this,void 0,void 0,(function*(){return this.formBuilder.group({id:[this.object.id],description:[this.object.description,[r.q.required,r.q.minLength(3)]],name:[this.object.name,[r.q.required,r.q.minLength(3)]],target:[this.object.target],urlImg:[this.object.urlImg]})}))}formConstructorNew(){return Object(s.__awaiter)(this,void 0,void 0,(function*(){return this.formBuilder.group({id:[""],description:["",[r.q.required,r.q.minLength(3)]],name:["",[r.q.required,r.q.minLength(3)]],target:[""],urlImg:[""]})}))}saveExercicios(){this.service.getExercicios().subscribe(t=>{for(const e of t){const t=new a.a(null,e.descricao,e.nome,e.alvoexercicio,"");this.service.createOrUpdate(t).subscribe(t=>{})}})}}return t.\u0275fac=function(e){return new(e||t)(c.Nb(c.r),c.Nb(b.b))},t.\u0275cmp=c.Hb({type:t,selectors:[["app-exercicios-edit"]],features:[c.yb],decls:11,vars:2,consts:[[1,"card"],[1,"page-top","sombra"],["title","voltar",1,"btn","btn-warning","btn-pdr","btn-sm","float-right","sombra-btn",3,"click"],[1,"fas","fa-arrow-circle-left"],[1,"card-body"],[1,"col-xs-12","col-md-12"],[1,"row","justify-content-center"],["class","text-center col-xs-12 col-md-3",4,"ngIf"],[1,"col-xs-12","col-md-9"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"text-center","col-xs-12","col-md-3"],[1,"img-fluid","img-thumbnail",2,"width","150px",3,"src"],[3,"formGroup","ngSubmit"],[1,"col-xs-12"],[1,"row"],[1,"col-sm-12","col-md-6"],[1,"form-group"],["for","name"],["id","name","type","text","formControlName","name","IkUpCase","",1,"form-control"],[3,"control"],[1,"col-xs-12","col-md-6"],["for","target",1,"control-label"],["id","status","formControlName","target",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-12","col-md-12"],["for","description"],["id","description","type","text","formControlName","description","rows","8","ikUpCase","",1,"form-control"],[3,"progress",4,"ngIf"],[2,"margin","2px"],[1,"row","toolbar"],[1,"col-sm-1",2,"padding","2px"],[1,"fileUpload","btn","btn-outline-primary","btn-block","border-l","toolbar-btn"],["type","file","class","upload","accept","image/*",3,"change",4,"ngIf"],[1,"fas","fa-cloud-upload-alt"],[1,"col-sm-10",2,"padding","2px"],["class","col-sm-1","style","padding: 2px;",4,"ngIf"],[3,"value"],[3,"progress"],["type","file","accept","image/*",1,"upload",3,"change"],["type","submit",1,"btn","btn-outline-success","btn-block","border-r","toolbar-btn",3,"disabled"],[1,"d-none","d-md-inline"],[1,"fas","fa-save"]],template:function(t,e){1&t&&(c.Qb(0,"div",0),c.Qb(1,"div",1),c.uc(2," Cadastro de Exercicio "),c.Qb(3,"button",2),c.Yb("click",(function(){return e.return()})),c.Ob(4,"i",3),c.Pb(),c.Pb(),c.Qb(5,"div",4),c.Qb(6,"div",5),c.Qb(7,"div",6),c.tc(8,h,2,1,"div",7),c.Qb(9,"div",8),c.tc(10,P,30,7,"form",9),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()),2&t&&(c.Bb(8),c.gc("ngIf",void 0!==e.object),c.Bb(2),c.gc("ngIf",void 0!==e.formulario))},directives:[l.k,r.s,r.l,r.g,r.b,r.k,r.e,d.a,r.p,l.j,u.a,r.n,r.r,g.a],styles:[""]}),t})();var O=i("/VSm"),j=i("SROd");function I(t,e){if(1&t&&(c.Qb(0,"option",16),c.uc(1),c.Pb()),2&t){const t=e.$implicit;c.gc("ngValue",t),c.Bb(1),c.vc(t)}}function w(t,e){if(1&t&&(c.Qb(0,"option",16),c.uc(1),c.Pb()),2&t){const t=e.$implicit;c.gc("ngValue",t.value),c.Bb(1),c.vc(t.desc)}}const y=function(t){return[t,"edit"]};function x(t,e){if(1&t){const t=c.Rb();c.Qb(0,"tr"),c.Qb(1,"td",20),c.uc(2),c.Pb(),c.Qb(3,"td",21),c.uc(4),c.Pb(),c.Qb(5,"td"),c.Qb(6,"a",22),c.Ob(7,"button",23),c.Pb(),c.Qb(8,"a",24),c.Qb(9,"button",25),c.Yb("click",(function(){c.oc(t);const i=e.$implicit;return c.bc(2).openModalDelete(i.id,"o Item: "+i.name)})),c.Pb(),c.Pb(),c.Pb(),c.Pb()}if(2&t){const t=e.$implicit;c.Bb(2),c.vc(t.name),c.Bb(2),c.vc(t.target),c.Bb(2),c.gc("routerLink",c.kc(3,y,t.id))}}function k(t,e){1&t&&(c.Qb(0,"td",26),c.uc(1," Nenhum registro encontrado"),c.Pb())}function B(t,e){if(1&t&&(c.Qb(0,"table",17),c.Qb(1,"thead"),c.Qb(2,"tr"),c.Qb(3,"th"),c.uc(4,"Nome"),c.Pb(),c.Qb(5,"th"),c.uc(6,"Alvo"),c.Pb(),c.Qb(7,"th"),c.uc(8,"Op\xe7\xf5es"),c.Pb(),c.Pb(),c.Pb(),c.Qb(9,"tbody"),c.tc(10,x,10,5,"tr",18),c.Qb(11,"tr"),c.tc(12,k,2,0,"td",19),c.Pb(),c.Pb(),c.Pb()),2&t){const t=c.bc();c.Bb(10),c.gc("ngForOf",t.list),c.Bb(2),c.gc("ngIf",t.list.length<1)}}let C=(()=>{class t extends n.b{constructor(t,e){super(t,e),this.injector=t,this.exerciciosService=e,this.targets=a.c.Targets}transformObjects(){return Object(s.__awaiter)(this,void 0,void 0,(function*(){return this.list}))}}return t.\u0275fac=function(e){return new(e||t)(c.Nb(c.r),c.Nb(b.b))},t.\u0275cmp=c.Hb({type:t,selectors:[["app-exercicios-list"]],features:[c.yb],decls:19,vars:10,consts:[["titletop","Exercicios Cadastrados","entity","list"],["search",""],[1,"col-md-12"],[1,"row"],[1,"col-sm-3","toolbar-item"],["id","qtd",1,"border-l",3,"ngModel","ngModelChange","change"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-sm-3","toobar-item"],["type","text","id","exercicio","placeholder","Exercicio","title","exercicio",1,"text-center",3,"ngModel","ngModelChange","keyup"],["name",""],["id","target",1,"border-l",3,"ngModel","ngModelChange","change"],["target",""],["body",""],["class","table table-striped table-bordered table-sm",4,"ngIf"],["footer",""],[3,"count","page","totalPages","totalElements","pageData"],[3,"ngValue"],[1,"table","table-striped","table-bordered","table-sm"],[4,"ngFor","ngForOf"],["colspan","4","style","background-color: red; color: white; font-weight: bold;",4,"ngIf"],["data-label","Nome:"],["data-label","Alvo:"],[1,"componenteform",3,"routerLink"],["title","Detalhes","data-toggle","tooltip","data-placement","bottom",1,"btn","btn-outline-primary","btn-pdr","fa","fa-edit","sombra-btn"],[1,"componenteform"],["type","button","title","Deletar","data-placement","bottom",1,"btn","btn-outline-danger","btn-pdr","fa","fa-trash","sombra-btn",3,"click"],["colspan","4",2,"background-color","red","color","white","font-weight","bold"]],template:function(t,e){if(1&t){const t=c.Rb();c.Qb(0,"base-layout",0),c.Qb(1,"div",1),c.Qb(2,"div",2),c.Qb(3,"div",3),c.Qb(4,"div",4),c.Qb(5,"select",5),c.Yb("ngModelChange",(function(t){return e.count=t}))("change",(function(){return e.getList()})),c.tc(6,I,2,2,"option",6),c.Pb(),c.Pb(),c.Ob(7,"div",7),c.Qb(8,"div",4),c.Qb(9,"input",8,9),c.Yb("ngModelChange",(function(t){return e.filter.name=t}))("keyup",(function(){c.oc(t);const i=c.nc(10);return e.filtrar(i.value)})),c.Pb(),c.Pb(),c.Qb(11,"div",4),c.Qb(12,"select",10,11),c.Yb("ngModelChange",(function(t){return e.filter.target=t}))("change",(function(){c.oc(t);const i=c.nc(13);return e.filtrar(i.value)})),c.tc(14,w,2,2,"option",6),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(15,"div",12),c.tc(16,B,13,2,"table",13),c.Pb(),c.Qb(17,"div",14),c.Qb(18,"ikPagination",15),c.Yb("pageData",(function(t){return e.pagination(t)})),c.Pb(),c.Pb(),c.Pb()}2&t&&(c.Bb(5),c.gc("ngModel",e.count),c.Bb(1),c.gc("ngForOf",e.counts),c.Bb(3),c.gc("ngModel",e.filter.name),c.Bb(3),c.gc("ngModel",e.filter.target),c.Bb(2),c.gc("ngForOf",e.targets),c.Bb(2),c.gc("ngIf",void 0!==e.list),c.Bb(2),c.gc("count",e.count)("page",e.page)("totalPages",e.totalPages)("totalElements",e.totalElements))},directives:[O.a,r.p,r.k,r.m,l.j,r.b,l.k,j.a,r.n,r.r,o.c],styles:[""]}),t})();var E=i("vMv0");const L=[{path:"",component:C},{path:":id/add",component:Q,canActivate:[E.a],data:{roles:["ROLE_ADM_DFIT","ROLE_PROF_DFIT"]}},{path:":id/edit",component:Q,canActivate:[E.a],data:{roles:["ROLE_ADM_DFIT","ROLE_PROF_DFIT"]}}];let F=(()=>{class t{}return t.\u0275mod=c.Lb({type:t}),t.\u0275inj=c.Kb({factory:function(e){return new(e||t)},imports:[[o.d.forChild(L)],o.d]}),t})();var _=i("WSrY");let D=(()=>{class t{}return t.\u0275mod=c.Lb({type:t}),t.\u0275inj=c.Kb({factory:function(e){return new(e||t)},imports:[[_.a,F]]}),t})()},SROd:function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var o=i("fXoL"),s=i("ofXK");function r(t,e){if(1&t){const t=o.Rb();o.Qb(0,"li",10),o.Qb(1,"a",11),o.Yb("click",(function(e){return o.oc(t),o.bc(2).setPage(0,e)})),o.Ob(2,"span",12),o.Pb(),o.Pb()}}function n(t,e){if(1&t){const t=o.Rb();o.Qb(0,"li",13),o.Qb(1,"a",14),o.Yb("click",(function(e){return o.oc(t),o.bc(2).setPreviousPage(e)})),o.Ob(2,"span",15),o.Pb(),o.Pb()}}const a=function(t){return{active:t}};function c(t,e){if(1&t){const t=o.Rb();o.Qb(0,"li",16),o.Qb(1,"a",11),o.Yb("click",(function(i){o.oc(t);const s=e.$implicit;return o.bc(2).setPage(s-1,i)})),o.uc(2),o.Pb(),o.Pb()}if(2&t){const t=e.$implicit,i=o.bc(2);o.gc("ngClass",o.kc(2,a,t-1===i.page)),o.Bb(2),o.wc(" ",t," ")}}function b(t,e){1&t&&(o.Qb(0,"li",17),o.Qb(1,"a",18),o.uc(2," ... "),o.Pb(),o.Pb())}function l(t,e){if(1&t){const t=o.Rb();o.Qb(0,"li",19),o.Qb(1,"a",11),o.Yb("click",(function(e){o.oc(t);const i=o.bc(2);return i.setPage(i.totalPages-1,e)})),o.uc(2),o.Pb(),o.Pb()}if(2&t){const t=o.bc(2);o.Bb(2),o.wc(" ",t.totalPages," ")}}function d(t,e){if(1&t){const t=o.Rb();o.Qb(0,"li",20),o.Qb(1,"a",14),o.Yb("click",(function(e){return o.oc(t),o.bc(2).setNextPage(e)})),o.Ob(2,"span",21),o.Pb(),o.Pb()}}function u(t,e){if(1&t){const t=o.Rb();o.Qb(0,"li",22),o.Qb(1,"a",11),o.Yb("click",(function(e){o.oc(t);const i=o.bc(2);return i.setPage(i.totalPages-1,e)})),o.Ob(2,"span",23),o.Pb(),o.Pb()}}function g(t,e){if(1&t&&(o.Qb(0,"div",1),o.Qb(1,"ul",2),o.tc(2,r,3,0,"li",3),o.tc(3,n,3,0,"li",4),o.tc(4,c,3,4,"li",5),o.tc(5,b,3,0,"li",6),o.tc(6,l,3,1,"li",7),o.tc(7,d,3,0,"li",8),o.tc(8,u,3,0,"li",9),o.Pb(),o.Qb(9,"p"),o.uc(10,"Total de registros: "),o.Qb(11,"strong"),o.uc(12),o.Pb(),o.uc(13,", p\xe1g. "),o.Qb(14,"strong"),o.uc(15),o.Pb(),o.uc(16," de "),o.Qb(17,"strong"),o.uc(18),o.Pb(),o.uc(19,"."),o.Pb(),o.Pb()),2&t){const t=o.bc();o.Bb(2),o.gc("ngIf",t.page+1!=1),o.Bb(1),o.gc("ngIf",t.page+1!=1),o.Bb(1),o.gc("ngForOf",t.pages),o.Bb(1),o.gc("ngIf",t.lastItem!=t.totalPages&&t.lastItem+1!=t.totalPages),o.Bb(1),o.gc("ngIf",t.lastItem!=t.totalPages),o.Bb(1),o.gc("ngIf",t.page+1!=t.lastItem),o.Bb(1),o.gc("ngIf",t.page+1!=t.lastItem),o.Bb(4),o.vc(t.totalElements),o.Bb(3),o.vc(t.page+1),o.Bb(3),o.vc(t.totalPages)}}let h=(()=>{class t{constructor(){this.pageData=new o.n,this.adjacente=2}ngOnInit(){this.page=this.page||0,this.count=this.count||10,this.geralinks()}setNextPage(t){t.preventDefault(),this.page+1<this.pages.length&&(this.page=this.page+1,this.paginar(this.page,this.count))}setPreviousPage(t){t.preventDefault(),this.page>0&&(this.page=this.page-1,this.paginar(this.page,this.count))}setPage(t,e){e.preventDefault(),this.page=t,this.paginar(this.page,this.count)}paginar(t,e){this.pageData.emit({page:t,count:e}),this.geralinks()}geralinks(){this.pages=[];const t=this.page+1+this.adjacente>=this.totalPages?this.totalPages:this.page+1+this.adjacente;for(let e=this.page+1-this.adjacente<=0||this.page-this.adjacente<=0?1:this.page+1-this.adjacente;e<=t;e++)this.pages.push(e);this.lastItem=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Hb({type:t,selectors:[["ikPagination"]],inputs:{count:"count",page:"page",totalPages:"totalPages",totalElements:"totalElements"},outputs:{pageData:"pageData"},decls:1,vars:1,consts:[["class","box-footer clearfix",4,"ngIf"],[1,"box-footer","clearfix"],[1,"pagination","justify-content-center"],["class","page-item","title","primeiro",4,"ngIf"],["class","page-item d-none d-sm-block","title","anterior",4,"ngIf"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"],["class","page-item disabled",4,"ngIf"],["class","page-item",4,"ngIf"],["class","page-item d-none d-sm-block","title","pr\xf3ximo",4,"ngIf"],["class","page-item","title","\xfaltimo",4,"ngIf"],["title","primeiro",1,"page-item"],["href","#",1,"page-link",3,"click"],["aria-hidden","true",1,"fa","fa-fast-backward"],["title","anterior",1,"page-item","d-none","d-sm-block"],["href","",1,"page-link",3,"click"],["aria-hidden","true",1,"fa","fa-backward"],[1,"page-item",3,"ngClass"],[1,"page-item","disabled"],["href","#",1,"page-link"],[1,"page-item"],["title","pr\xf3ximo",1,"page-item","d-none","d-sm-block"],["aria-hidden","true",1,"fa","fa-forward"],["title","\xfaltimo",1,"page-item"],["aria-hidden","true",1,"fa","fa-fast-forward"]],template:function(t,e){1&t&&o.tc(0,g,20,10,"div",0),2&t&&o.gc("ngIf",null!=e.pages)},directives:[s.k,s.j,s.i],styles:[".page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#07889b!important;border-color:#07889b!important;border-radius:5px}.page-link[_ngcontent-%COMP%]{color:#07889b}"]}),t})()},fO6d:function(t,e,i){"use strict";var o=i("tjtH");i.d(e,"a",(function(){return o.a}));var s=i("nWdV");i.d(e,"b",(function(){return s.a}))},nWdV:function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));var o=i("mrSG"),s=i("IzEk"),r=i("gb6z"),n=i("e5me"),a=i("JZt4"),c=i("T8WP"),b=i("SvUs"),l=i("72KF"),d=i("fXoL");let u=(()=>{class t{constructor(t,e){this.injector=t,this.service=e,this.filter=new l.a,this.page=0,this.count=5,this.counts=[2,5,10,20,50,100],this.search="",this.auth=this.injector.get(a.a),this.confirm=this.injector.get(r.a),this.erroService=this.injector.get(n.c),this.load=this.injector.get(c.a),this.toast=this.injector.get(b.a)}ngOnInit(){this.getList(),this.listFactory()}getList(){this.service.findAllPage(this.page,this.count,this.filter).pipe(Object(s.a)(1)).subscribe(t=>{this.list=t.data.content,this.transformObjects().then(t=>{this.list=t}),this.totalPages=new Array(t.data.totalPages).length,this.totalElements=t.data.totalElements},t=>{this.toast.danger(`Falha ao listar!! (${this.handleError(t)})`)})}openModalDelete(t,e){this.id=t,this.confirm.show({message:`Deseja deletar ${e}`,siFn:()=>{this.deletar()}})}deletar(){this.load.show({}),this.service.delete(this.id).subscribe(t=>{this.toast.success("Exclus\xe3o realizada com sucesso!"),this.getList(),this.load.dismiss()},t=>{this.toast.danger(`Falha ao deletar!! (${this.handleError(t)})`),this.load.dismiss()})}listFactory(){}pagination(t){this.page=t.page,this.count=t.count,this.getList()}transformObjects(){return Object(o.__awaiter)(this,void 0,void 0,(function*(){return this.list}))}relatorio(t){this.relatorioService[t]().then(t=>{const e=window.URL.createObjectURL(t);window.open(e)})}filtrar(t){(t.length>2||t.length<1)&&setTimeout(()=>{this.getList(),this.pagination({page:0,count:this.count})},100)}handleError(t){return this.erroService.handler(t)}}return t.\u0275fac=function(t){d.Xb()},t.\u0275dir=d.Ib({type:t}),t})()},tjtH:function(t,e,i){"use strict";i.d(e,"a",(function(){return m}));var o=i("mrSG"),s=i("tyNb"),r=i("fXoL"),n=i("3Pt+"),a=i("IzEk"),c=i("lJxs"),b=i("eIep"),l=i("EY2u"),d=i("72KF"),u=i("e5me"),g=i("JZt4"),h=i("T8WP"),f=i("SvUs"),p=i("d6RJ");let m=(()=>{class t{constructor(t,e,i,o){this.injector=t,this.service=e,this.urlImg=i,this.urlList=o,this.filter=new d.a,this.validateMsg="Erro de Valida\xe7\xe3o",this.uploadProgress=0,this.auth=this.injector.get(g.a),this.cd=this.injector.get(r.h),this.cepService=this.injector.get(u.b),this.confirm=this.injector.get(p.a),this.erroService=this.injector.get(u.c),this.formBuilder=this.injector.get(n.c),this.imageService=this.injector.get(u.d),this.load=this.injector.get(h.a),this.route=this.injector.get(s.a),this.router=this.injector.get(s.b),this.toast=this.injector.get(f.a)}ngOnInit(){this.route.params.pipe(Object(a.a)(1)).subscribe(t=>{"0"===t.id?this.newRecord():(this.id=t.id,this.findById(this.id))}),this.listFactory()}findById(t){this.service.findById(t).pipe(Object(a.a)(1)).subscribe(t=>{this.object=t.data,this.guardListAttrib(),this.object.hasOwnProperty("endereco")&&this.cepService.getCidadeNome(this.object.endereco.cidade).subscribe(t=>this.cidades=t),this.formConstructorById().then(t=>{this.formulario=t,this.chageCitys()})},t=>{this.toast.danger(`Falha ao localizar documento!!: (${this.handleError(t)})`)})}newRecord(){this.formConstructorNew().then(t=>{this.formulario=t,this.chageCitys()})}onSubmit(){this.object=this.formulario.value,this.returnListAttrib(),this.load.show({message:"Aguarde valida\xe7\xe3o..."}),this.validateData().then(t=>{if(this.load.dismiss(),t)if(this.object.id)if(this.filePhoto){this.load.show({message:"Aguarde upload..."});const t=this.imageService.uploadImg(this.urlImg,this.filePhoto,this.object.id);t.percentageChanges().subscribe(t=>{this.uploadProgress=Math.round(t),this.cd.detectChanges()}),t.then(t=>{t.ref.getDownloadURL().then(t=>{this.object.urlImg=t,this.edit(this.object)})})}else this.load.show({}),this.edit(this.object);else this.service.createOrUpdate(this.object).subscribe(t=>{this.toast.success("Registro efetuado com sucesso!"),this.resetForm()},t=>{console.log(t),this.toast.danger(`Erro ao registrar ${this.handleError(t)}`)});else this.toast.danger(this.validateMsg)})}edit(t){this.service.createOrUpdate(t).pipe(Object(a.a)(1)).subscribe(t=>{this.load.dismiss(),this.toast.success("Edi\xe7\xe3o realizada com sucesso!"),this.filePhoto=void 0,this.uploadProgress=0,this.cd.detectChanges()},t=>{this.toast.danger(`Erro ao editar: (${this.handleError(t)})`)})}onPhoto(t){const e=this.load;e.show({}),this.imageService.processImage(t.target.files).pipe(Object(a.a)(1)).subscribe(t=>{this.filePhoto=t.data},t=>{},()=>{e.dismiss()})}guardListAttrib(){return Object(o.__awaiter)(this,void 0,void 0,(function*(){}))}returnListAttrib(){return Object(o.__awaiter)(this,void 0,void 0,(function*(){}))}validateData(){return Object(o.__awaiter)(this,void 0,void 0,(function*(){return!0}))}formConstructorById(){return Object(o.__awaiter)(this,void 0,void 0,(function*(){return this.formBuilder.group({})}))}formConstructorNew(){return Object(o.__awaiter)(this,void 0,void 0,(function*(){return this.formBuilder.group({})}))}resetForm(){this.formulario.reset()}chageCitys(){void 0!==this.object&&this.object.hasOwnProperty("endereco")&&this.formulario.get("endereco.estado").valueChanges.pipe(Object(c.a)(t=>this.estados.filter(e=>e.sigla===t)),Object(c.a)(t=>t&&t.length>0?t[0].id:Object(l.b)()),Object(b.a)(t=>this.cepService.getCidades(t))).subscribe(t=>this.cidades=t)}consultaCEP(){const t=this.formulario.get("endereco.cep").value;null!=t&&""!==t&&this.cepService.consultaCEP(t).pipe(Object(a.a)(1)).subscribe(t=>{this.populaDadosForm(t)},t=>console.log(this.handleError(t)))}populaDadosForm(t){this.formulario.patchValue({endereco:{cep:t.cep,logradouro:t.logradouro,complemento:t.complemento,bairro:t.bairro,cidade:t.localidade,estado:t.uf}})}getCidades(){this.cepService.getCidades(6).subscribe(t=>{this.cidades=t})}listFactory(){}handleError(t){return this.erroService.handler(t)}return(){this.router.navigate([this.urlList])}}return t.\u0275fac=function(t){r.Xb()},t.\u0275dir=r.Ib({type:t}),t})()}}]);